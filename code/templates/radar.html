<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>雷达图</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        .radar-grid-container {
            display: grid;
            grid-template-columns: 1fr 1fr;  /* 两列等宽 */
            gap: 30px;                       /* 图表间距 */
            width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }
        .radar-card {
            background: white;
            border-radius: 10px;
            box-shadow: 15px 30px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .radar-title {
            text-align: center;
            padding: 15px 0;
            margin: 0;
            font-size: 22px;
            background-color: #2c3e50;
            color: white;
            border-radius: 8px;
        }
        .radar-chart {
            width: 100%;
            height: 600px;
        }
        @media (max-width: 1300px) {
            .radar-grid-container {
                grid-template-columns: 1fr;  /* 小屏幕时改为单列 */
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div class="radar-grid-container">
        <!-- 标签等级雷达图 -->
        <div class="radar-card">
            <h3 class="radar-title">专题通过题数</h3>
            <div id="radar-container-acc" class="radar-chart"></div>
        </div>

        <!-- 标签通过率雷达图 -->
        <div class="radar-card">
            <h3 class="radar-title">专题通过率</h3>
            <div id="radar-container-ac-per" class="radar-chart"></div>
        </div>
    </div>
    <style>
        .chart-container {
            width: 800px;
            height: 600px;
            margin: 20px auto;
            border: 1px solid #eee;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .chart-title {
            text-align: center;
            font-size: 18px;
            padding: 10px 0;
        }
    </style>


    <script>
        // 从Django获取的数据
        var acc = {{ acc|safe }};
        var ac_per = {{ ac_per|safe }};
        var tags = Object.keys(acc);

        // 通用雷达图配置生成函数
        function createRadarOption(title, data, valueMapper) {
            return {
                title: {
                    text: title,
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item'
                },
                radar: {
                    indicator: tags.map(tag => ({
                        name: tag,
                        max: Math.max(...Object.values(data)) + 2
                    })),
                    shape: 'circle',
                    splitNumber: 5,
                    axisName: {
                        color: '#333',
                        fontSize: 12
                    }
                },
                series: [{
                    type: 'radar',
                    data: [{
                        value: tags.map(tag => valueMapper(data[tag])),
                        name: title,
                        areaStyle: {
                            opacity: 0.6
                        }
                    }]
                }]
            };
        }

        // 初始化两个图表
        var chartAcc = echarts.init(document.getElementById('radar-container-acc'));
        var chartAcPer = echarts.init(document.getElementById('radar-container-ac-per'));

        // 设置不同的颜色和样式
        var accOption = createRadarOption('专题通过题数', acc, val => val);
        accOption.series[0].data[0].lineStyle = { color: '#FF6384' };
        accOption.series[0].data[0].areaStyle.color = 'rgba(255, 99, 132, 0.6)';

        var acPerOption = createRadarOption('专题通过率', ac_per, val => val ); // 转换为百分比
        acPerOption.series[0].data[0].lineStyle = { color: '#36A2EB' };
        acPerOption.series[0].data[0].areaStyle.color = 'rgba(54, 162, 235, 0.6)';

        // 渲染图表
        chartAcc.setOption(accOption);
        chartAcPer.setOption(acPerOption);

        // 响应式调整
        window.addEventListener('resize', function() {
            chartAcc.resize();
            chartAcPer.resize();
        });
    </script>
</body>
</html>